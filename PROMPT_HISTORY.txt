I used ChatGPT 5.2 model to generate a well-designed prompt for Cursor to start building.
Cursor selected its model on its own. I sometimes set the "Cycle Agent Count" to 2x to get better answers.


--------------------------------------------------------------------------------


Initial Conversation with ChatGPT:

I asked:
I'm working on a vibe-coding HW with those instructions (and I pasted the instructions from the 15-113 website).
I want to create an AI Health Assistant driven by FastAPI called Pillulu Health Assistant, which will help people search for the pills they need, ask the LLM about the names, information, recommended adult dosage by doctors, etc., add the medications to their medicine boxes, and set the timing for taking the medicine.
It can also provide email notifications for taking the medicine and when the medication storage is running low. 

Technology stack:
Front-end: HTML, CSS, and JS
Back-end: FastAPI
Database: SQLite
Use Render to hold the site. 

Color Scheme: 
bee9e8
62b6cb
1b4965
cae9ff
5fa8d3

Help me write a detailed English prompt for Cursor to fulfill the requirments above.

ChatGPT's answer:
You are Cursor. Build a full working MVP for a web app named “Pillulu Health Assistant”.

GOAL
Create a FastAPI backend deployed on Render and a static frontend (HTML/CSS/JS) that integrates with the backend via fetch(). The app helps users:
1) Search medication names and basic info
2) Ask an AI about medication name/info/adult dosage guidance (with strong disclaimer)
3) Add medications into “My Pillbox” (local inventory + schedule)
4) Configure reminders (when to take, low stock threshold)
5) Receive email reminders for “time to take” and “low stock” via a scheduled job endpoint (Render cron-friendly)

IMPORTANT SAFETY/COMPLIANCE
- This is not medical advice. Always show a clear disclaimer on the UI and in AI responses.
- AI answers must be framed as educational and suggest consulting a licensed clinician/pharmacist.
- Never ask for or store highly sensitive personal health details beyond what’s needed for the demo (med name, schedule, stock).
- Do not commit secrets (OPENAI_API_KEY, SENDGRID_API_KEY, etc.) into git.

TECH STACK
- Frontend: Vanilla HTML + CSS + JS (no frameworks)
- Backend: FastAPI (Python)
- DB: SQLite (SQLAlchemy recommended)
- Deploy: Render Web Service
- Email: SendGrid API recommended (fallback: SMTP)
- AI: OpenAI Chat Completions API (server-side only)
- Medication search data: use OpenFDA (no key) as the primary source if possible; if OpenFDA fails, return a graceful error.

COLOR PALETTE (use throughout UI)
- #bee9e8
- #62b6cb
- #1b4965
- #cae9ff
- #5fa8d3
Design should be clean, readable, simple (don’t over-polish). Use these colors for background, buttons, accents, and cards.

REPO STRUCTURE
Create two folders at repo root:
1) backend/
2) frontend/

BACKEND REQUIREMENTS
1) FastAPI app with CORS enabled for GitHub Pages/static hosting.
2) SQLite database with SQLAlchemy models and migrations optional (keep simple).
3) Environment variables:
   - OPENAI_API_KEY
   - SENDGRID_API_KEY
   - FROM_EMAIL (verified sender in SendGrid)
   - APP_BASE_URL (frontend URL for links in emails, optional)
   - DATABASE_PATH (default to ./data/pillulu.db)
4) Provide a /health endpoint.

DATABASE DESIGN (minimum)
- meds table:
  - id (int, pk)
  - name (str)
  - purpose (str nullable)
  - dosage_notes (str nullable)  # stored user notes, not medical prescription
  - adult_dosage_guidance (str nullable) # from AI as “guidance”
  - stock_count (int default 0)
  - low_stock_threshold (int default 5)
  - created_at (datetime)
- schedules table:
  - id (int, pk)
  - med_id (fk -> meds.id)
  - time_of_day (str, e.g. "08:30")  # 24h
  - timezone (str, e.g. "America/New_York")
  - days_of_week (str, e.g. "mon,tue,wed,thu,fri" or "daily")
  - enabled (bool)
- users table (simple single-user demo is OK, but still store email):
  - id (int, pk)
  - email (str unique)
  - created_at
For MVP, you can assume single user and store one email in a settings table; but better to implement users minimally.

KEY API ENDPOINTS
A) Medication Search (OpenFDA)
- GET /api/med/search?q=ibuprofen
  - returns JSON list of { brand_name, generic_name, manufacturer, route, substance_name, warnings_snippet }
  - handle empty query: 400
  - handle OpenFDA errors: 502 with message

B) AI Q&A about medication
- POST /api/ai/ask
  - body: { question: string, context_med_name?: string }
  - server calls OpenAI with a SYSTEM prompt enforcing safety + disclaimers.
  - returns: { answer: string, disclaimer: string }
  - validate: non-empty question, length limits

C) Pillbox CRUD
- POST /api/pillbox/meds
  - body: { name, purpose?, dosage_notes?, stock_count, low_stock_threshold }
  - returns created med
- GET /api/pillbox/meds
  - returns list of meds and their schedules
- PUT /api/pillbox/meds/{id}
  - update stock, thresholds, notes
- DELETE /api/pillbox/meds/{id}

D) Schedule CRUD
- POST /api/pillbox/meds/{id}/schedules
  - body: { time_of_day, timezone, days_of_week, enabled }
- GET /api/pillbox/meds/{id}/schedules
- PUT /api/schedules/{schedule_id}
- DELETE /api/schedules/{schedule_id}

E) Reminder trigger endpoints (cron-friendly)
Since static frontend can’t run cron, implement backend endpoints that a Render Cron Job can hit:
- POST /api/cron/send_reminders
  - body: { secret: string } OR use header X-CRON-SECRET
  - checks due schedules “now” (within 1–2 minute window) and sends emails
  - also checks low stock (stock_count <= low_stock_threshold) and sends low stock emails (dedupe daily)
- POST /api/cron/decrement_stock
  - optional: when a reminder is sent, decrement stock_count by 1 for that med (configurable)
For MVP: decrement stock each time a scheduled reminder fires (simple assumption). Track last_sent timestamps to prevent duplicates.

SECURITY
- Add a CRON_SECRET env var; cron endpoints require it.
- Never expose OPENAI_API_KEY or SENDGRID_API_KEY to frontend.
- Add basic validation and informative errors.
- Rate limit (optional) simple per-IP in memory is OK, but not required for MVP.

EMAIL
- Implement SendGrid mail sending in backend/services/email.py.
- Email templates:
  1) “Time to take {med_name}” with schedule time and link back to app
  2) “Low stock: {med_name}” showing remaining count and threshold
- For demo: send to the stored user email.
- Keep emails plain-text and simple HTML.

AI PROMPTING (server-side)
- System message must state:
  - educational only, not medical advice
  - do not prescribe, do not claim certainty
  - encourage consulting clinician
  - if dosage asked, provide general typical adult dosage ranges only if confident, otherwise recommend professional advice
  - mention that individual factors (age, kidney disease, pregnancy, other meds) matter
- Always append a disclaimer string in the API response.

FRONTEND REQUIREMENTS
Create frontend files in frontend/:
- index.html
- styles.css
- app.js

Pages/sections (single-page is fine):
1) Header + disclaimer banner (sticky)
2) “Search Medications” section
   - input + button
   - display results cards from /api/med/search
   - each card has “Ask AI about this” and “Add to Pillbox” buttons
3) “Ask AI” section
   - textarea question + optional med name
   - show answer + disclaimer
4) “My Pillbox” section
   - list meds in cards with stock count, threshold
   - edit stock, threshold, notes
   - schedule list with add schedule form (time, timezone, days)
5) “Email Settings” section
   - set user email (simple)
6) Error handling:
   - show user-friendly message banners for failed fetch, empty inputs, backend down.

Frontend should use a configurable backend base URL at top of app.js, like:
const API_BASE = "https://YOUR-RENDER-URL.onrender.com";

UI STYLE using palette:
- Background: #bee9e8 or #cae9ff (light)
- Primary buttons: #1b4965 text white
- Secondary buttons: #62b6cb / #5fa8d3
- Cards: white with border accents (#62b6cb)
- Use consistent spacing, rounded corners, simple responsive layout.

DEPLOYMENT NOTES (Render)
- Add a README for backend and frontend.
- Backend start command:
  uvicorn app.main:app --host 0.0.0.0 --port $PORT
- Ensure SQLite directory exists on startup (backend/data).
- Optionally configure a Render Persistent Disk mounted to /var/data and set DATABASE_PATH=/var/data/pillulu.db.

DELIVERABLES
1) Working backend with above endpoints.
2) Working frontend that calls backend and displays results.
3) Clear README:
   - endpoints summary
   - environment variables
   - local run steps
   - how frontend communicates with backend
   - secrets handling
   - cron instructions (how to configure Render Cron Job to call /api/cron/send_reminders with secret)
4) PROMPT_HISTORY.txt capturing key prompts used.

IMPLEMENTATION PLAN (execute)
1) Scaffold backend with FastAPI + CORS + SQLAlchemy + SQLite
2) Implement models + CRUD routes
3) Implement OpenFDA search route
4) Implement AI ask route
5) Implement SendGrid email service
6) Implement cron endpoints with dedupe logic (store last_sent date in DB)
7) Scaffold frontend UI and wire fetch calls
8) Add robust error handling and clear messages
9) Write READMEs and prompt log

QUALITY BAR
- Must run locally with `uvicorn` and on Render.
- Frontend must work by opening index.html via GitHub Pages and successfully hitting backend.
- All secrets in env vars only.
- Clean JSON responses and clear error messages.

Now generate the full code for backend/ and frontend/ with all files, plus READMEs. Make sure it is copy-paste runnable.